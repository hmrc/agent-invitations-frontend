@*
 * Copyright 2019 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.play.views.html.layouts
@import play.api.Configuration
@import uk.gov.hmrc.agentinvitationsfrontend.config.ExternalUrls
@import uk.gov.hmrc.agentinvitationsfrontend.controllers.routes
@(title: String,
        sidebarLinks: Option[Html] = None,
        contentHeader: Option[Html] = None,
        bodyClasses: Option[String] = None,
        mainClass: Option[String] = None,
        scriptElem: Option[Html] = None,
        isAgent: Boolean,
        bannerTitle: String = "banner.agents.auth",
        completedInviteGoSurvey: Option[Boolean] = None,
        gaCalls: Option[(String,String) => Html] = None,
        mainDataAttributes: Option[Html] = None,
        hasTimeout: Boolean = true)(mainContent: Html)(implicit messages: Messages, request: Request[_], configuration: Configuration, externalUrls: ExternalUrls)

    @serviceInfoContent = {}

        @agentOrClient = @{
            if(isAgent){"agent"} else {"client"}
        }

        @logoutUrl = @{
            if(isAgent){
                routes.AgentInvitationJourneyController.signedOut()
             } else {
                routes.ClientInvitationJourneyController.signedOut()
            }
        }

    @sidebar = {
    @if(sidebarLinks.isDefined) {
        @layouts.sidebar(sidebarLinks.get, Some("sidebar"))
    }
    }

        @scriptElements = {
            @scriptElem
            @if(hasTimeout) {
     <script id="timeoutDialog">
        $.timeoutDialog({
            timeout: @externalUrls.timeout,
            countdown: @externalUrls.timeoutCountdown,
            keep_alive_url: '@routes.ClientInvitationJourneyController.keepAlive()',
            title: "@Messages("timeout-dialog.title")",
            messageSeconds: "@Messages("timeout-dialog.seconds")",
            messageMinutes: "@Messages("timeout-dialog.minutes")",
            messageMinute: "@Messages("timeout-dialog.minute")",
            logout_url: '@logoutUrl',
            message: "@Messages(s"timeout-dialog.p1.$agentOrClient")",
            keep_alive_button_text: "@Messages("timeout-dialog.button")"
        });
        </script>
            }
        }

    @govuk_wrapper(title,
        mainClass,
        bodyClasses = bodyClasses,
        sidebar = sidebar,
        contentHeader = contentHeader,
        mainContent = layouts.article(mainContent),
        serviceInfoContent = serviceInfoContent,
        scriptElem = Some(scriptElements),
        cookies = Some(request.cookies),
        isAgent = isAgent,
        bannerTitle = bannerTitle,
        completedInviteGoSurvey = completedInviteGoSurvey,
        mainDataAttributes = mainDataAttributes,
        gaCalls = gaCalls)
